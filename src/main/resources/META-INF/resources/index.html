<html>
<head>
<title>Plants</title>
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
</head>
<body>
	<div id="lightContainer"
		style="width: 50%; height: 400px; margin: 0 auto; float:left;"></div>
	<p></p>
	<div id="tempContainer"
		style="width: 50%; height: 400px; margin: 0 auto; float:right;"></div>
	<div id="moisture1Container"
		style="width: 20%; height: 400px; margin: 0 auto; float:left;"></div>
	<div id="moisture2Container"
		style="width: 20%; height: 400px; margin: 0 auto; float:left;"></div>
	<script language="JavaScript">
		Highcharts.setOptions({
			global : {
				useUTC : false
			}
		});
		$(document).ready(
				function() {
					draw_light_chart();
					draw_temp_chart();
					draw_m1_chart();
					draw_m2_chart();

					var lightJson = new Array();
					var tempJson = new Array();
					var m1Json = new Array();
					var m2Json = new Array();
					function draw_light_chart() {
						$.getJSON("/rest/sensors/light/recentData",
								function(light) {
									for (i = 0; i < light.length; i++) {
										lightJson.push([ light[i].date,
												light[i].value * 100 / 1024 ]);
									}
									/** Declare options after success callback. */
									var options = {
										title : {
											text : "Light Data",
											align : "center"
										},
										chart : {
											renderTo : 'lightContainer',
											type : 'line'
										},
										xAxis : {
											type : 'datetime'
										},
										yAxis : {
											title : {
												text : 'Light %'
											}
										},
										series : [ {
											data : lightJson,
											name : "Light",
											color : '#418F27'
										} ],
										credits: {
										    enabled: false
										},
									};

									/** Create a chart instance and pass options. */
									var chart = new Highcharts.Chart(options);
								})};

					function draw_temp_chart() {
						$.getJSON("/rest/sensors/temp/recentData",
								function(temp) {
									for (i = 0; i < temp.length; i++) {
										tempJson
												.push([ temp[i].date,
														temp[i].value ]);
									}
									/** Declare options after success callback. */
									var options = {
										title : {
											text : "Temperature Data",
											align : "center"
										},
										chart : {
											renderTo : 'tempContainer',
											type : 'line'
										},
										xAxis : {
											labels: {
												useHTML : true
											},
											type : 'datetime'
										},
										yAxis : {
											title : {
												text : 'Temp (â„ƒ)'
											}
										},
										series : [ {
											data : tempJson,
											name : "Indoor Temperature"
										} ],
										credits: {
										    enabled: false
										},
									};

									/** Create a chart instance and pass options. */
									var chart = new Highcharts.Chart(options);
								})};
					function draw_m1_chart() {
						$.getJSON("/rest/sensors/moisture/recentData/3",
								function(m) {
									for (i = 0; i < m.length; i++) {
										m1Json
												.push([ m[i].date,
														(1023-m[i].value) *100/1024 ]);
									}
									/** Declare options after success callback. */
									var options = {
										title : {
											text : "Oregano Moisture Data",
											align : "center"
										},
										chart : {
											renderTo : 'moisture1Container',
											type : 'line'
										},
										xAxis : {
											labels: {
												useHTML : true
											},
											type : 'datetime'
										},
										yAxis : {
											title : {
												text : 'Moisture %'
											}
										},
										series : [ {
											data : m1Json,
											name : "Oregano Moisture"
										} ],
										credits: {
										    enabled: false
										},
									};
	
									/** Create a chart instance and pass options. */
									var chart = new Highcharts.Chart(options);
								})};
								
					function draw_m2_chart() {
						$.getJSON("/rest/sensors/moisture/recentData/4",
								function(m) {
									for (i = 0; i < m.length; i++) {
										m2Json
												.push([ m[i].date,
														(1023-m[i].value) *100/1024 ]);
									}
									/** Declare options after success callback. */
									var options = {
										title : {
											text : "Basil Moisture Data",
											align : "center"
										},
										chart : {
											renderTo : 'moisture2Container',
											type : 'line'
										},
										xAxis : {
											labels: {
												useHTML : true
											},
											type : 'datetime'
										},
										yAxis : {
											title : {
												text : 'Moisture %'
											}
										},
										series : [ {
											data : m2Json,
											name : "Basil Moisture",
											color : '#cc33ff'
										} ],
										credits: {
										    enabled: false
										},
									};
	
									/** Create a chart instance and pass options. */
									var chart = new Highcharts.Chart(options);
								})};
				});
	</script>
</body>
</html>